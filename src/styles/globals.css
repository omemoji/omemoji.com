@import "tailwindcss";

@theme inline {
  --color-gray-*: initial;
  --color-blue-*: initial;
}

@theme {
  --breakpoint-xs: 480px;
  --breakpoint-sm: 600px;
  --breakpoint-md: 700px;

  /* Gray palette */
  --color-gray-50: oklch(0.985 0 0);
  --color-gray-100: oklch(0.967 0 0);
  --color-gray-200: oklch(0.928 0 0);
  --color-gray-300: oklch(0.872 0 0);
  --color-gray-400: oklch(0.707 0 0);
  --color-gray-500: oklch(0.551 0 0);
  --color-gray-600: oklch(0.446 0 0);
  --color-gray-700: oklch(0.373 0 0);
  --color-gray-800: oklch(0.269 0 0);
  --color-gray-900: oklch(0.205 0 0);
  --color-gray-950: oklch(0.143 0 0);

  /* Blue palette */
  --color-blue-50: oklch(0.97 0.014 254.6);
  --color-blue-100: oklch(0.932 0.032 255.5);
  --color-blue-200: oklch(0.882 0.059 254.1);
  --color-blue-300: oklch(0.809 0.105 251.8);
  --color-blue-400: oklch(0.707 0.165 254.6);
  --color-blue-500: oklch(0.623 0.214 259.1);
  --color-blue-600: oklch(0.546 0.245 262.8);
  --color-blue-700: oklch(0.488 0.243 264.3);
  --color-blue-800: oklch(0.424 0.199 265.6);
  --color-blue-900: oklch(0.379 0.146 265.7);
  --color-blue-950: oklch(0.282 0.091 267.9);
}

@layer base {
  * {
    line-height: 1.7rem;
  }
  html {
    font-size: 16px;
    font-family:
      -apple-system, "Helvetica Neue", BlinkMacSystemFont, Arial,
      "Hiragino Kaku Gothic", Roboto, "Noto Sans CJK JP", "Segoe UI",
      sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
      "Noto Color Emoji";
  }
  body {
    color: var(--fg);
    background: var(--bg);
    @apply leading-8 max-w-screen-md mx-auto md:border-(--border) md:border-x;

    -webkit-text-size-adjust: 100%;
  }

  /* Link */
  article a {
    @apply hover:underline break-all;
    color: var(--link);
  }

  main article {
    @apply m-4 my-8 md:m-12;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    @apply font-bold;
  }

  h1 {
    @apply my-2 px-4 py-2 text-3xl text-center;
  }
  h2 {
    @apply mt-16 mb-8 py-2;
    font-size: 1.6rem;
    line-height: 2rem;
  }
  h3 {
    @apply my-8;
    font-size: 1.3rem;
    line-height: 1.75rem;
  }
  h4 {
    @apply my-6 text-lg;
  }
  h5 {
    @apply text-base;
  }
  h6 {
    @apply text-base;
  }
  article h2 {
    position: relative;
    @apply py-3;
    border-bottom: 3px solid var(--border);
  }
  article h2:before {
    position: absolute;
    content: "";
    width: 25%;
    left: 0;
    bottom: -3px;
    border-bottom: 3px solid var(--link);
  }
  article h2:first-of-type {
    @apply mt-0 md:mt-12;
  }
  article h2 a {
    color: var(--fg);
  }
  article h3 {
    @apply mt-9 mb-6 py-2;
    border-bottom: solid 1px var(--border);
  }
  article h3 a {
    color: var(--fg);
  }
  article h4 a {
    color: var(--fg);
  }
  article h5 a {
    color: var(--fg);
  }
  article h6 a {
    color: var(--fg);
  }
}

@layer utilities {
  /**/
  main article figure {
    @apply my-6;
  }

  main article p {
    @apply my-6;
  }
  /* Table */
  table {
    @apply my-6;
  }
  table,
  thead,
  th,
  tbody,
  tr,
  td {
    @apply p-1 px-2;
    border: solid 1px var(--border);
  }

  /* List */
  main article img {
    @apply my-4;
  }
  main article ul {
    @apply pl-6 my-6;
  }
  main article ul li {
    @apply list-disc;
  }
  main article ul li ul {
    @apply my-0;
  }
  main article ul li p {
    @apply my-0;
  }
  main article ol {
    @apply pl-6 my-6;
  }
  main article ol li {
    @apply list-decimal;
  }
  main article ol li ol {
    @apply my-0;
  }
  main article ol li p {
    @apply my-0;
  }

  pre {
    @apply mb-6 py-4 px-8 overflow-auto rounded-lg;
    max-height: 540px;
  }

  p code {
    @apply text-sm;
    padding: 2px 6px;
    border-radius: 4px;
    background-color: var(--code-bg);
    color: var(--code-fg);
  }
  li code {
    @apply text-sm;
    padding: 2px 6px;
    border-radius: 4px;
    background-color: var(--code-bg);
    color: var(--code-fg);
  }
  code span {
    @apply text-sm;
    margin-top: 2px;
    margin-bottom: 2px;
  }

  blockquote {
    @apply m-6 px-4;
    color: var(--quote);
    border-left: solid 4px var(--quote);
  }
}

@layer components {
  .content-image {
    @apply w-full h-auto;
    max-height: 540px;
    background-color: var(--bg-artwork);
  }
  .caption {
    border-top: solid 4px var(--link);
  }
  .tag {
    @apply inline-block mr-1 hover:underline;
    color: var(--link);
  }

  .emoji {
    height: 120px;
    font-size: 100px;
  }
  .top-article {
    border-bottom: solid 1px var(--border);
  }

  iframe {
    width: 100%;
  }
  .expressive-code {
    @apply my-6;
  }
}

@media {
  :root {
    --fg: #000000;
    --bg: #ffffff;
    --bg-artwork: #dddddd;
    --border: #aaaaaa;
    --link: #d50000;
    --quote: #666666;
    --linkcard: #aaaaaa;
    --menu: #666666;
    --code-fg: #222222;
    --code-bg: #eeeeee;

    /* --link: #4070ff; */
  }
}

@media (prefers-color-scheme: dark) {
  :root {
    --fg: #ffffff;
    --bg: #000000;
    --bg-artwork: #222222;
    --border: #aaaaaa;
    --link: #88c0dd;
    --quote: #9c9c9c;
    --linkcard: #666666;
    --menu: #9c9c9c;
    --code-fg: #dddddd;
    --code-bg: #222222;
  }
}
